<%- include('partials/head.ejs'); -%>
<% if (user) { %>
    <%- include('partials/headerLogueado'); %>
<% } else { %>
    <%- include('partials/header'); %>
<% } %>


<section>
    <div class="container">
        <p class="product-detail-description">Agregar un producto</p>

        <% if (typeof errors !== 'undefined' && Object.keys(errors).length > 0) { %>
            <ul>
                <% Object.keys(errors).forEach((field) => { %>
                    <li><%= errors[field].msg %></li>
                <% }) %>
            </ul>
        <% } %>
        
    <section class="formularios">
        <form action="/product/add/<%= producto ? producto.id : '' %>" method="post">
            <div>
                <label for="imagen">Imagen:</label>
                <input type="text" id="imagen" name="imagen" value="<%= old.imagen || (producto ? producto.imagen : '') %>" required>
            </div>
            <div>
                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" name="nombre" value="<%= old.nombre || (producto ? producto.nombre : '') %>" required>
            </div>
            <div>
                <label for="descripcion">Descripci√≥n:</label>
                <textarea id="descripcion" name="descripcion" required><%= old.descripcion || (producto ? producto.descripcion : '') %></textarea>
            </div>
            <div>
                <label for="color">Color:</label>
                <input type="text" id="color" name="color" value="<%= old.color || (producto ? producto.color : '') %>" required>
            </div>
            <div>
                <button class="boton" type="submit">Agregar</button>
            </div>
        </form>
    </section >
    
    <% if (producto) { %>
        <div class="mt-4">
            <div class="product-detail">
         <p class="product-detail-description">Producto Agregado</p>
                <div class="row">
                    <article class="col-12 col-lg-8 product-detail-info">
                        <img src="<%= producto.imagen %>" alt="<%= producto.nombre %>" class="product-detail-img">
                        <p class="product-detail-description"><%= producto.descripcion %></p>
                    </article>
                </div>
            </div>
        </div>
    <% } %>
    </div>
</section>

<%- include('partials/footer.ejs'); -%>