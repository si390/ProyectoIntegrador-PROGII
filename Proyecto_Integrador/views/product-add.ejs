<%- include('partials/head.ejs'); -%>

<% if (locals.user != undefined) { %>
    <%- include('partials/headerLogueado') %>
<% } else { %>
    <%- include('partials/header') %>
<% } %>

<section>
    <div class="container">
        <h1>Agregar Producto</h1>

        <% if (typeof errors !== 'undefined' && Object.keys(errors).length > 0) { %>
            <ul>
                <% Object.keys(errors).forEach((field) => { %>
                    <li><%= errors[field].msg %></li>
                <% }) %>
            </ul>
        <% } %>
        
        <form action="/product/add/<%= producto ? producto.id : '' %>" method="post">
            <div>
                <label for="imagen">Imagen:</label>
                <input type="text" id="imagen" name="imagen" value="<%= old.imagen || (producto ? producto.imagen : '') %>" required>
            </div>
            <div>
                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" name="nombre" value="<%= old.nombre || (producto ? producto.nombre : '') %>" required>
            </div>
            <div>
                <label for="descripcion">Descripci√≥n:</label>
                <textarea id="descripcion" name="descripcion" required><%= old.descripcion || (producto ? producto.descripcion : '') %></textarea>
            </div>
            <div>
                <label for="color">Color:</label>
                <input type="text" id="color" name="color" value="<%= old.color || (producto ? producto.color : '') %>" required>
            </div>
        </form>

        <% if (producto) { %>
            <div class="product-detail">
                <h2>Producto Agregado</h2>
                <div class="row">
                    <article class="col-12 col-lg-8 product-detail-info">
                        <img src="<%= producto.imagen %>" alt="<%= producto.nombre %>" class="product-detail-img">
                        <p class="product-detail-description"><%= producto.descripcion %></p>
                    </article>
                </div>
            </div>
        <% } %>
    </div>
</section>

<%- include('partials/footer.ejs'); -%>